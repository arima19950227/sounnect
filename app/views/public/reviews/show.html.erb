<div><%= flash[:notice] %></div>


<div class ="container">
 <div class="row">
  <div class="col-md-9 card mb-5 mt-5">
   <%=image_tag@review.get_sauna_image(700,700), class: "sauna_image"%>
   <p class="review_name2 ml-4 mt-4 mb-5">ï¸<%=@review.name%>ã®è©³ç´°ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>
  <div class="row">
   <div class="card col-md-6 border border-danger shadow rounded m-2" style="background-color:#FAF0E6">
    <h3 class="sauna mt-3">ã‚µã‚¦ãƒŠğŸ”¥</h3>
    <div class="row">
     <p class= "s col-5 ml-2 mb-2 mt-3">ã‚µã‚¦ãƒŠåºƒã•:</p>
     <p class="sauna_area col-5 mt-3"><%= @review.sauna_area_i18n %></p>
    </div>

     <div class="row">
     <p class= "s col-4 ml-2 mb-4 mt-3">ã‚µã‚¦ãƒŠæ¸©åº¦:</p>
     <p class="sauna_ondo col-6 mt-3"><%=@review.sauna_temperature_i18n%></p>
    </div>

     <div class="row">
     <p class= "s col-4 ml-2 mb-2">ãƒ­ã‚¦ãƒªãƒ¥:</p>
     <p class="sauna_area col-7"><%=@review.loryu_type_i18n%></p>
    </div>

    <div class="row">
     <p class= "s col-5 ml-2 mb-4 mt-3">ã‚¢ã‚¦ãƒ•ã‚°ãƒ¼ã‚¹:</p>
     <p class="sauna_area col-5 mt-3 mb-4"><%=@review.aufguss_i18n%></p>
    </div>
  </div>
  <div class=" card col-md-5 border border-info shadow rounded m-2" style="background-color:#E0FFFF;">
   <h3 class="mizu mt-3">æ°´é¢¨å‘‚ğŸ’§</h3>

    <div class="row">
     <p class= "s col-5 ml-2 mb-2 mt-4 mb-4">æ°´é¢¨å‘‚åºƒã•:</p>
     <p class="sauna_area col-5 mt-4 mb-4"><%=@review.water_area_i18n%></p>
    </div>

   <div class="row">
     <p class= "s col-4 ml-2 mb-4 mt-5">æ°´é¢¨å‘‚æ¸©åº¦:</p>
     <p class="mizu_ondo col-6 mt-5"><%=@review.water_temperature_i18n%></p>
    </div>

   </div>
  </div>

   <div class="row mt-3">
     <p class= "col-md-2 text-center">ä½æ‰€:</p>
     <p class=" col-md-10"><%= @review.address %></p>
   </div>

    <div id="map2"></div>

   <div class="card container border-dark mt-3">
    <div class="row mt-3">
     <p class= "col-sm-2 text-center" style="background-color:#FFE4C4;">æ¤…å­ã®æ•°</p>
     <p class="col-sm-2 text-center"><%=@review.chair_count_i18n%></p>
     <p class= "col-sm-2 text-center" style="background-color:#FFE4C4; font-size:14px;">å…¥æµ´ã—ãŸæ™‚é–“å¸¯</p>
     <p class= "col-sm-2 text-center"><%=@review.sauna_time_i18n%></p>
     <p class= "col-sm-2 text-center" style="background-color:#FFE4C4;">äººã®å¤šã•</p>
     <p class= "col-sm-2 text-center"><%=@review.congestion_i18n%></p>
    </div>
   </div>

   <div class="row">
     <p class= "col-md-12 mb-4 mt-2">æ–™é‡‘:
     ï¿¥<%= @review.price %>å††</p>
    </div>

   <strong class= "ml-5 mb-2 mt-4">[ãƒ¡ãƒ¢]</strong>
   <div class="card rounded mb-5 mx-auto" style="width:80%;">
    <p class="mb-2 ml-4" style="font-size:15px;"><%=@review.body%></p>
   </div>

  <p class="text-right mr-5">[ç·åˆè©•ä¾¡]</p>
  <div id="post_raty<%= @review.id %>" class="text-right mr-3"></div>
   <script>
   $(function(){
    console.log($('#post_raty<%= @review.id %>'));
     $('#post_raty<%= @review.id %>').empty();
     $('#post_raty<%= @review.id %>').raty({
      //æ˜Ÿç”»åƒã®æŒ‡å®šãªã©ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã“ã“ã«è¨˜è¿°,
       size     : 36,
       starOff:  '<%= asset_path('star-off.png') %>',
       starOn : '<%= asset_path('star-on.png') %>',
       starHalf: '<%= asset_path('star-half.png') %>',
       score: <%= @review.evaluation %>,
       readOnly: true,
       half: true,
        });
       })
   </script>
   <p class="mb-2 view_count">é–²è¦§æ•°: <i class="bi bi-eyeglasses"></i>ã€€<%= @review.view_counts.count %></p>
   <p id= "favorite_buttons_<%= @review.id %>">
    <%= render 'public/favorites/favorites', review: @review %></p>

 <div>
  <% if @review.user == current_user %>
    <%= link_to 'ç·¨é›†', edit_review_path(@review), class: "btn btn-sm btn-success" %>
    <%= link_to 'å‰Šé™¤', review_path(@review), method: :delete, data: { confirm: 'æœ¬å½“ã«æ¶ˆã—ã¾ã™ã‹ï¼Ÿ' }, class: "btn btn-sm btn-danger"%>
  <% end %>
 </div>


   <p class="ml-5 mt-5">ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§:</p>
    <div class= "comment_area mx-auto mb-4" style="width:80%">
      <p class="comment_area"><%= render 'public/comments/comment', review: @review %></p>
    </div>
   <p class="ml-5 mt-5">ã‚³ãƒ¡ãƒ³ãƒˆã‚’é€ã‚‹</p>
    <div>
      <%= render 'public/comments/form', review: @review, comment: @comment %>
    </div>

</div>
  <div class=" col-md-3 mb-5 mt-5 text-center">
  <div class="row">
   <p class="col-md-12">[ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±]</p>

   <div class="col-md-12">
    <%=link_to(@review.user)do%>
     <%=image_tag @review.user.get_profile_image(100,100), class: "rounded-circle"%><br>
     <%=@review.user.name%>
    <%end%>
   </div>

     <p class="col-lg-12">ãƒ•ã‚©ãƒ­ãƒ¼:
     <%=@review.user.followings.count%>äºº</p>
     <p class="col-lg-12">ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼:
     <%= @review.user.followers.count %>äºº</p>


   </div>
  </div>
 </div>
</div>

<script>
  function initMap(){
    // åœ°å›³ã®ä½ç½®æƒ…å ±(ç·¯åº¦ãƒ»çµŒåº¦)ã‚’å–å¾—
    let mapPosition = {lat: <%= @review.latitude || 0 %> , lng: <%= @review.longitude || 0 %> };
    let map = new google.maps.Map(document.getElementById('map2'), {
      zoom: 15,
      center: mapPosition
    });
    let transitLayer = new google.maps.TransitLayer();
    transitLayer.setMap(map);

    let contentString = 'ã€ä½æ‰€ã€‘<%= @review.address %>';
    let infowindow = new google.maps.InfoWindow({
      content: contentString
    });

    let marker = new google.maps.Marker({
      position: mapPosition,
      map: map,
      title: contentString
    });

    marker.addListener('click', function(){
      infowindow.open(map, marker);
    });
  }
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_KEY'] %>&callback=initMap" async defer></script>